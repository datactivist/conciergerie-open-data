version: "2.0"

rules:

- rule: Répondre au revoir a chaque fois que l'utilisateur dit au revoir
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Répondre aux questions
  steps:
  - intent: faq
  - action: utter_faq

- rule: Répondre aux discussions de tous les jours
  steps:
  - intent: chitchat
  - action: utter_chitchat

- rule: Demander à l'utilisateur de reformuler si le NLU n'est pas confiant
  steps:
  - intent: nlu_fallback
  - action: utter_default

- rule: activation du formulaire de recherche
  steps:
  - intent: request_search
  - action: search_form
  - active_loop: search_form

- rule: désactivation du formulaire de recherche
  condition:
  - active_loop: search_form
  steps:
  - action: search_form
  - active_loop: null
  - action: action_set_keywords_feedback_slot
  - action: utter_submit_search_form
  - action: action_utter_confirm_search

- rule: désactivation du formulaire de feedback results
  condition:
  - active_loop: feedback_results_form
  steps:
  - action: feedback_results_form
  - active_loop: null
  - action: action_set_results_feedback_slot
  - action: action_send_results_feedback_to_database
  - action: action_reset_keywords_slot
  - action: action_reset_results_slot
  - action: utter_submit_feedback_form
